use UTbot as knowledge.

% we need random to pick a random navPoint as target. 
% This also (unfortunately) causes the rule order to change.
order=random.

module UTbotEvent {
	% Update the navigation state of the bot ('send on change' percept).
	forall bel( navigation(OldStatus,OldDest)), percept(navigation(Status,Destination))
		do delete( navigation(OldStatus,OldDest) ) + insert(navigation(Status,Destination)).

	% if we have no goal, pick a navPoint as target
	if not(goal(at(_))), bel(navPoint(Target)) then adopt(at(Target)).
	
	% no path to destination? Change the goal.
	if bel((navigation(noPath,_); navigation(stuck,_)), navPoint(Target)), 
	goal(at(X)) then drop(at(X)) + adopt(at(Target))+ print("destination can't be reached!").
}
